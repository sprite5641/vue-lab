{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Sprite-PC/OneDrive/\\u0E40\\u0E14\\u0E2A\\u0E01\\u0E4C\\u0E17\\u0E47\\u0E2D\\u0E1B/vue-notus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport Axios from 'axios';\nimport { adminLogin } from '@/api/admin.js';\nexport default {\n  login: function login(_ref, admin) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var commit, response, token, _admin;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              commit('auth_request');\n              _context.next = 4;\n              return Axios.post(adminLogin, admin);\n\n            case 4:\n              response = _context.sent;\n\n              if (response.data.success) {\n                token = response.data.token;\n                _admin = response.data.admin;\n                localStorage.setItem('token', token); // Axios.defaults.headers.common['Authorization'] = token\n\n                commit('auth_success', token, _admin);\n              } else {\n                localStorage.removeItem('token');\n                commit('auth_error');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n};","map":{"version":3,"sources":["C:/Users/Sprite-PC/OneDrive/เดสก์ท็อป/vue-notus/src/store/modules/auth/actions.js"],"names":["Axios","adminLogin","login","admin","commit","post","response","data","success","token","localStorage","setItem","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,gBAAzB;AACA,eAAe;AACNC,EAAAA,KADM,uBACUC,KADV,EACgB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAfC,cAAAA,MAAe,QAAfA,MAAe;AAEvBA,cAAAA,MAAM,CAAC,cAAD,CAAN;AAFuB;AAAA,qBAIAJ,KAAK,CAACK,IAAN,CAAWJ,UAAX,EAAsBE,KAAtB,CAJA;;AAAA;AAIjBG,cAAAA,QAJiB;;AAMvB,kBAAGA,QAAQ,CAACC,IAAT,CAAcC,OAAjB,EAAyB;AAEjBC,gBAAAA,KAFiB,GAETH,QAAQ,CAACC,IAAT,CAAcE,KAFL;AAGbN,gBAAAA,MAHa,GAGLG,QAAQ,CAACC,IAAT,CAAcJ,KAHT;AAInBO,gBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B,EAJmB,CAKnB;;AACAL,gBAAAA,MAAM,CAAC,cAAD,EAAiBK,KAAjB,EAAwBN,MAAxB,CAAN;AAEL,eARD,MAQO;AACLO,gBAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACAR,gBAAAA,MAAM,CAAC,YAAD,CAAN;AAGD;;AAnBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBxB;AArBQ,CAAf","sourcesContent":["import Axios from 'axios'\r\nimport {adminLogin} from '@/api/admin.js'\r\nexport default {\r\n   async login({commit}, admin){\r\n\r\n        commit('auth_request')\r\n\r\n        const response = await Axios.post(adminLogin,admin )\r\n\r\n        if(response.data.success){\r\n\r\n          const token = response.data.token\r\n              const admin = response.data.admin\r\n              localStorage.setItem('token', token)\r\n              // Axios.defaults.headers.common['Authorization'] = token\r\n              commit('auth_success', token, admin)\r\n\r\n        } else {\r\n          localStorage.removeItem('token')\r\n          commit('auth_error')\r\n\r\n\r\n        }\r\n      }\r\n}"]},"metadata":{},"sourceType":"module"}