{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Sprite-PC/OneDrive/\\u0E40\\u0E14\\u0E2A\\u0E01\\u0E4C\\u0E17\\u0E47\\u0E2D\\u0E1B/vue-notus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport Axios from 'axios';\nimport { adminLogin } from '@/api/admin.js';\nexport default {\n  login: function login(_ref, admin) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var commit, response, token, _admin;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              commit('auth_request');\n              _context.next = 4;\n              return Axios({\n                url: adminLogin,\n                data: admin,\n                method: 'POST'\n              });\n\n            case 4:\n              response = _context.sent;\n\n              if (response.success) {\n                token = response.data.token;\n                _admin = response.data.admin;\n                localStorage.setItem('token', token);\n                Axios.defaults.headers.common['Authorization'] = token;\n                commit('auth_success', token, _admin);\n              } else {\n                commit('auth_error');\n                localStorage.removeItem('token');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n};","map":{"version":3,"sources":["C:/Users/Sprite-PC/OneDrive/เดสก์ท็อป/vue-notus/src/store/modules/auth/actions.js"],"names":["Axios","adminLogin","login","admin","commit","url","data","method","response","success","token","localStorage","setItem","defaults","headers","common","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,gBAAzB;AACA,eAAe;AACLC,EAAAA,KADK,uBACaC,KADb,EACoB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAjBC,cAAAA,MAAiB,QAAjBA,MAAiB;AAC3BA,cAAAA,MAAM,CAAC,cAAD,CAAN;AAD2B;AAAA,qBAEJJ,KAAK,CAAC;AAAEK,gBAAAA,GAAG,EAAEJ,UAAP;AAAmBK,gBAAAA,IAAI,EAAEH,KAAzB;AAAgCI,gBAAAA,MAAM,EAAE;AAAxC,eAAD,CAFD;;AAAA;AAErBC,cAAAA,QAFqB;;AAG3B,kBAAIA,QAAQ,CAACC,OAAb,EAAsB;AACZC,gBAAAA,KADY,GACJF,QAAQ,CAACF,IAAT,CAAcI,KADV;AAEZP,gBAAAA,MAFY,GAEJK,QAAQ,CAACF,IAAT,CAAcH,KAFV;AAGlBQ,gBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACAV,gBAAAA,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDL,KAAjD;AACAN,gBAAAA,MAAM,CAAC,cAAD,EAAiBM,KAAjB,EAAwBP,MAAxB,CAAN;AAEH,eAPD,MAOO;AACHC,gBAAAA,MAAM,CAAC,YAAD,CAAN;AACAO,gBAAAA,YAAY,CAACK,UAAb,CAAwB,OAAxB;AAEH;;AAd0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe9B;AAhBU,CAAf","sourcesContent":["import Axios from 'axios'\r\nimport {adminLogin} from '@/api/admin.js'\r\nexport default {\r\n    async login({ commit }, admin) {\r\n        commit('auth_request')\r\n        const response = await Axios({ url: adminLogin, data: admin, method: 'POST' })\r\n        if (response.success) {\r\n            const token = response.data.token\r\n            const admin = response.data.admin\r\n            localStorage.setItem('token', token)\r\n            Axios.defaults.headers.common['Authorization'] = token\r\n            commit('auth_success', token, admin)\r\n\r\n        } else {\r\n            commit('auth_error')\r\n            localStorage.removeItem('token')\r\n\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}